# Examle om deploying nginx as a Deployment
# Using ingress
#
# We are also importing it's config file and a static 'index.html' 
# to a ConfigMap that is mounted in the container

# -c certbot-authenticator -l trace -d 'examples/nginx/nginx-certbot.yaml' -D 'dns/k8s.lastviking.eu.yaml'
# --manage-namespace true -n dns-example -d examples/nginx/nginx-certbot.yaml -l trace -v hostname=nginx.k8s.lastviking.eu --dns-server-config=dns/k8s.lastviking.eu.yaml

name: nginx
kind: Deployment
args:
    replicas: "3"
    image: nginx
    port: "8080"
    config.fromFile: examples/nginx/nginx.conf,examples/nginx/index.html
    pod.command: nginx -c /config/nginx.conf
    ingress.paths: ${hostname}:/*
    certbot: auto
